<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit" />
    <meta name="keywords" content="前端规范,前端页面开发,CSS方案,CSS规范,CSS框架,CSS代码库,CSS插件,网页制作" />
    <meta name="description" content="本站包括了规范、框架、代码库等内容，致力于为前端开发人员提供高效率高质量的前端页面开发解决方案，提高多人协作效率，也为非专业人员提供快速制作网页的解决方案。" />
    <meta name="copyright" content="浙江爱信诺航天信息有限公司" />
    <title>抽奖-组件-浙江爱信诺前端规范</title>
    <link rel="stylesheet" type="text/css" href="../../style/base.css" />
    <link rel="stylesheet" type="text/css" href="../../style/common.css" />
    <link rel="stylesheet" type="text/css" href="../../style/page.css" />
    <link rel="stylesheet" type="text/css" href="../layer/layer.css" />
    <link rel="stylesheet" type="text/css" href="lottery.css" />
	<link type="text/css" rel="stylesheet" href="../../style/syntax/shCore.css"/>
	<link type="text/css" rel="stylesheet" href="../../style/syntax/shThemeDefault.css"/>
	<style type="text/css">
	.m-demo1 { position:relative; width:302px; height:302px;}
    .m-demo1 .ui-lottery li { width:100px; height:100px; border:1px solid #ccc; background-color:#fff;}
    .m-demo1 .ui-lottery li.s-crt { background-color:#efefef;}
    .m-demo1 .ui-lottery-btn { top:101px; left:101px; width:100px; height:100px; line-height:100px; text-align:center; background-color:#f60;}
	
	.m-demo2 { position:relative; padding:10px; width:568px; height:568px; background-color:#FF7659;}
    .m-demo2 .ui-lottery { background-color:#fff;}
    .m-demo2 .ui-lottery li { width:142px; height:142px;}
    .m-demo2 .ui-lottery li p { position:relative; height:100%;}
    .m-demo2 .ui-lottery li p i { display:none; position:absolute; top:0; left:0; width:100%; height:100%; background-color:#000; opacity:.5; filter:alpha(opacity=50);}
    .m-demo2 .ui-lottery li.s-crt p i { display:inline;}
    .m-demo2 .ui-lottery-btn { top:152px; left:152px; width:284px; height:284px; background:url(images/btn.jpg) no-repeat;}
    .m-demo2 .ui-lottery-btn.s-dis { -webkit-filter:grayscale(1); -ms-filter:grayscale(1); filter:grayscale(1); filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);}
	
	.m-demo3 { width:592px; height:592px; background:url(./images/rotate/r1.png) no-repeat center;}
	.m-demo3 .ui-lottery { background:url(./images/rotate/r3.png) no-repeat -9999px -9999px;}
	.m-demo3 .ui-lottery.s-r0 { background-position:50px 57px;}
	.m-demo3 .ui-lottery.s-r1 { background-position:50px -535px;}
	.m-demo3 .ui-lottery.s-r2 { background-position:50px -1127px;}
	.m-demo3 .ui-lottery.s-r3 { background-position:50px -1721px;}
	.m-demo3 .ui-lottery.s-r4 { background-position:50px -2311px;}
	.m-demo3 .ui-lottery.s-r5 { background-position:50px -2903px;}
	.m-demo3 .ui-lottery.s-r6 { background-position:50px -3496px;}
	.m-demo3 .ui-lottery.s-r7 { background-position:50px -4088px;}
	.m-demo3 .ui-lottery.s-r8 { background-position:50px -4680px;}
	.m-demo3 .ui-lottery.s-r9 { background-position:50px -5273px;}
	.m-demo3 .ui-lottery li { width:100%; height:100%; top:0; left:0; background:url(./images/rotate/r2.png) no-repeat;}
	.m-demo3 .ui-lottery-btn { top:50%; left:50%; margin:-55px 0 0 -55px; padding-top:7px; width:110px; height:103px; line-height:45px; text-align:center; border-radius:100%; font-size:38px; background-color:#E26F0B; font-family:\5fae\8f6f\96c5\9ed1; color:#F0CD0F;}
    .m-demo3 .ui-lottery-btn.s-dis { background-color:#999;}
	</style>
</head>

<body class="g-body">
    <!-- header begin -->
    <div class="g-header">
		<div class="m-htop g-wrap">
			<i></i><i></i><i></i><i></i><i></i><i></i>
			<h1 class="u-logo"><a href="../../index.html">浙江爱信诺前端规范</a></h1>
		</div>
		<div class="m-nav">
			<ul class="g-wrap">
				<li><a href="../../index.html">规范<i class="ui-icon ui-icon-tip"></i></a></li>
				<li><a href="../../framework.html">框架<i class="ui-icon ui-icon-tip"></i></a></li>
				<li class="s-crt"><a href="../../plugin.html">组件<i class="ui-icon ui-icon-tip"></i></a></li>
			</ul>
		</div>
	</div>
    <!-- header end -->
	
	<!-- content begin -->
	<div class="g-content f-clearfix">
		<div class="g-side">
			<div class="m-menu" id="menu"> 
				<ul></ul> 
			</div>
		</div>
		<div class="g-main">
			<div class="g-con">
				<div class="m-article m-plugin ui-animate ui-animate-fadeShow"> 
                    <h2 class="u-ttb2">组件 - <em id="title">抽奖</em></h2> 
                    <div class="u-line"><span class="linea"></span><span class="lineb"></span></div> 
                    <dl> 
                        <dt>使用说明</dt>
                        <dd>
							<pre class="brush:xml;">
                            <!-- 引入组件样式 -->
                            &lt;link rel="stylesheet" type="text/css" href="lottery.css" /&gt;
                            
							<!-- 创建骨架 -->
							<div class="demo">
								<!-- ui-lottery元素可设置插件属性，如果设置了，则优先使用元素上的 -->
								<ul class="ui-lottery" data-count="8" data-...>
									<li></li>
									<li></li>
									<li></li>
									.....
								</ul>
								<div class="ui-lottery-btn"></div>
							</div>
							
                            <!-- 引入jQuery和组件脚本 -->
                            &lt;script type="text/javascript" src="jquery.js"&gt;&lt;/script&gt;
                            &lt;script type="text/javascript" src="jquery.lottery.js"&gt;&lt;/script&gt;
                            </pre>
                        </dd>
						<dt>实例</dt>
						<dd>
							<h3 class="f-fwb">1.默认九宫格</h3>
							<div class="m-demo1 e-mt10">
								<ul class="ui-lottery">
									<li>商品1</li>
									<li>商品2</li>
									<li>商品3</li>
									<li>商品4</li>
									<li>商品5</li>
									<li>商品6</li>
									<li>商品7</li>
									<li>商品8</li>
								</ul>
								<div class="ui-lottery-btn"></div>
							</div>
							<pre class="brush:html;">
								<div>
									<ul class="ui-lottery">
										<li>商品1</li>
										<li>商品2</li>
										<li>商品3</li>
										<li>商品4</li>
										<li>商品5</li>
										<li>商品6</li>
										<li>商品7</li>
										<li>商品8</li>
									</ul>
									<div class="ui-lottery-btn"></div>
								</div>
							</pre>
							<pre class="brush:js;">
							$('.m-demo1').lottery({
								url:function(self){
									return 'http://www.yinjiazeng.com/testdata/test/upload.php?callback=?&type='+self.data('type');
								},
								//后台json也可直接返回index，前提是后台商品列表和前端列表对应
								succCallback:function(data, items){
									var index = 0;
									items.each(function(){
										if($(this).text() == data.result.name){
											index = $(this).index();
											return false;
										}
									});
									return index;
								},
								complete:function(data, items){
									$.layer.alert(items.eq(data.index).text(), '', 280);
								}
							});
							</pre>
							<h3 class="f-fwb">2.自定义九宫格</h3>
							<div class="m-demo2">
								<ul class="ui-lottery">
									<li title="飞利浦耳机"><p><img src="images/1.png" /><i></i></p></li>
									<li title="Ipad Mini平板电脑"><p><img src="images/2.png" /><i></i></p></li>
									<li title="谢谢参与"><p><img src="images/3.png" /><i></i></p></li>
									<li title="耐克跑鞋男版"><p><img src="images/4.png" /><i></i></p></li>
									<li title="耐克跑鞋女版"><p><img src="images/5.png" /><i></i></p></li>
									<li title="充气娃娃"><p><img src="images/6.png" /><i></i></p></li>
									<li title="Iphone4手机"><p><img src="images/7.png" /><i></i></p></li>
									<li title="OPPO音乐随身听"><p><img src="images/8.png" /><i></i></p></li>
									<li title="谢谢参与"><p><img src="images/3.png" /><i></i></p></li>
									<li title="充气娃娃"><p><img src="images/6.png" /><i></i></p></li>
									<li title="飞利浦耳机"><p><img src="images/1.png" /><i></i></p></li>
									<li title="Ipad Mini平板电脑"><p><img src="images/2.png" /><i></i></p></li>
								</ul>
								<div class="ui-lottery-btn"></div>
							</div>
							<pre class="brush:html;">
								<div>
									<ul class="ui-lottery">
										<li title="飞利浦耳机"><p><img src="images/1.png" /><i></i></p></li>
										<li title="Ipad Mini平板电脑"><p><img src="images/2.png" /><i></i></p></li>
										<li title="谢谢参与"><p><img src="images/3.png" /><i></i></p></li>
										<li title="耐克跑鞋男版"><p><img src="images/4.png" /><i></i></p></li>
										<li title="耐克跑鞋女版"><p><img src="images/5.png" /><i></i></p></li>
										<li title="充气娃娃"><p><img src="images/6.png" /><i></i></p></li>
										<li title="Iphone4手机"><p><img src="images/7.png" /><i></i></p></li>
										<li title="OPPO音乐随身听"><p><img src="images/8.png" /><i></i></p></li>
										<li title="谢谢参与"><p><img src="images/3.png" /><i></i></p></li>
										<li title="充气娃娃"><p><img src="images/6.png" /><i></i></p></li>
										<li title="飞利浦耳机"><p><img src="images/1.png" /><i></i></p></li>
										<li title="Ipad Mini平板电脑"><p><img src="images/2.png" /><i></i></p></li>
									</ul>
									<div class="ui-lottery-btn"></div>
								</div>
							</pre>
							<pre class="brush:js;">
							$('.m-demo2').lottery({
								count:12,
								trans:2,
								getRandom:function(self){
									var beginNum = temp = index = 0,
										rand = Math.round(Math.random()*total) + 1;
									$.each(prob, function(k, v){
										temp += v;
										beginNum = total - temp;
										if(rand > beginNum && rand <= (beginNum + v)){
											index = k;
											return false;
										}
									});
									
									return index;
								},
								complete:function(data, items){
									setRandColor();
									$.layer.alert(items.eq(data.index).attr('title'), '', 280);
								},
								bindClick:function(){
									clearInterval(colorTimer);
								}
							});
							</pre>
							<h3 class="f-fwb">3.旋转宫格</h3>
							<div class="m-demo3">
								<ul class="ui-lottery" data-rotate="true">
									<li></li>
								</ul>
								<div class="ui-lottery-btn">点击抽奖</div>
							</div>
							<pre class="brush:xml">
								<div>
									<ul class="ui-lottery" data-rotate="true">
										<li></li>
									</ul>
									<div class="ui-lottery-btn">点击抽奖</div>
								</div>
							</pre>
							<pre class="brush:js;">
							$('.m-demo3').lottery({
								count:10,
								getRandom:function(self){
								var beginNum = temp = index = 0,
									rand = Math.round(Math.random()*100) + 1;
									$.each(dataArr2, function(k, v){
										var prob = v.prob;
										temp += prob;
										beginNum = 100 - temp;
										if(rand > beginNum && rand <= (beginNum + prob)){
											index = k;
											return false;
										}
									});
									return index;
								},
								statusCallback:function(target, index){
									target.parent().removeClass().addClass('ui-lottery s-r'+index);
								},
								complete:function(data, items){
									$.layer.alert(dataArr2[data.index].name;, '', 280);
								}
							});
							</pre>
						</dd>
						<dt>API</dt>
                        <dd>
							<table> 
                                <thead> 
                                    <tr>
                                        <th width="120">普通属性</th>
                                        <th width="120">值类型</th>
                                        <th width="150">默认值</th>
                                        <th width="120">可填值</th>
                                        <th>功能说明</th>
                                    </tr> 
                                </thead> 
                                <tbody> 
									<tr>
                                        <td>speed</td>
                                        <td>Number</td>
                                        <td>240</td>
                                        <td>正整数</td>
                                        <td>初始速度</td>
                                    </tr>
									<tr>
                                        <td>trans</td>
                                        <td>Number</td>
                                        <td>2</td>
                                        <td>正整数</td>
                                        <td>最大速度过渡圈数</td>
                                    </tr>
									<tr>    
                                        <td>turns</td>
                                        <td>Number</td>
                                        <td>2</td>
                                        <td>正整数</td>
                                        <td>达到最大速度时圈数</td>
                                    </tr>
									<tr>
                                        <td>count</td>
                                        <td>Number</td>
                                        <td>8</td>
                                        <td>正整数</td>
                                        <td>宫格数量</td>
                                    </tr>
									<tr>
                                        <td>url</td>
                                        <td>String</td>
                                        <td>''</td>
                                        <td>字符串</td>
                                        <td>异步交互url</td>
                                    </tr>
									<tr>
                                        <td>rotate</td>
                                        <td>Boolean</td>
                                        <td>false</td>
                                        <td>true|false</td>
                                        <td>是否旋转形式</td>
                                    </tr>
                                </tbody>
                            </table>
                            <table>
                                <thead> 
                                    <tr>
                                        <th width="120">普通方法</th>
                                        <th width="120">参数</th>
                                        <th width="150">默认值</th>
                                        <th width="120">返回值</th>
                                        <th>功能说明</th>
                                    </tr> 
                                </thead> 
                                <tbody> 
									<tr>
                                        <td>getRandom</td>
                                        <td>self</td>
                                        <td>调用组件的jQuery对象</td>
                                        <td>抽中随机数</td>
                                        <td>前端不通过ajax交互返回随机数</td>
                                    </tr>
									<tr>
                                        <td>url</td>
                                        <td>self</td>
                                        <td>调用组件的jQuery对象</td>
                                        <td>url字符串</td>
                                        <td>异步交互url，如果一个页面有多个抽奖活动，每个接口都不一样，但是参数都一样，可以用这个</td>
                                    </tr>
									<tr>
                                        <td>getParam</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>参数对象</td>
                                        <td>处理并返回ajax传递参数</td>
                                    </tr>
									<tr>
                                        <td rowspan="2">succCallback</td>
                                        <td>data</td>
                                        <td>ajax响应JSON对象</td>
                                        <td rowspan="2">返回抽中列表元素索引</td>
                                        <td rowspan="2">ajax交互成功时回调函数</td>
                                    </tr>
									<tr>
										<td>items</td>
										<td>宫格列表jQuery对象</td>
									</tr>
									<tr>
                                        <td>errCallback</td>
                                        <td>data</td>
                                        <td>ajax响应JSON对象</td>
                                        <td>-</td>
                                        <td>ajax交互失败回调函数</td>
                                    </tr>
                                    <tr>
                                        <td rowspan="2">complete</td>
                                        <td>data</td>
                                        <td>数据对象，包含index属性</td>
                                        <td rowspan="2">-</td>
                                        <td rowspan="2">抽奖圈数转完执行函数</td>
                                    </tr>
									<tr>
										<td>items</td>
										<td>宫格列表jQuery对象</td>
									</tr>
									<tr>
                                        <td rowspan="2">statusCallback</td>
                                        <td>items</td>
                                        <td>宫格列表jQuery对象</td>
                                        <td rowspan="2">-</td>
                                        <td rowspan="2">转圈中执行回调函数，通常作为对选中状态的改变</td>
                                    </tr>
									<tr>
										<td>index</td>
										<td>选中状态元素的索引</td>
									</tr>
									<tr>
                                        <td>bindClick</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>布尔值</td>
                                        <td>抽奖按钮点击时触发函数，若返回false则不会触发ajax</td>
                                    </tr>
                                </tbody>
                            </table> 
						</dd> 
                        <dt>下载</dt>
                        <dd>
                            <a href="lottery.css">lottery.css</a>
                            <a href="jquery.lottery.js" class="e-ml10">jquery.lottery.js</a>
                        </dd>
                        <dt>版本更新</dt>
                        <dd id="updatelog"></dd>
                    </dl> 
                </div> 
			</div>
		</div>
	</div>
	<!-- content end -->
	
	<!-- footer begin -->
	<div class="g-footer">
		<div class="g-wrap">
			<p>
				<a href="http://wpa.qq.com/msgrd?v=3&uin=897102078&site=qq&menu=yes" target="_blank">技术支持</a>
			</p>
			<p>Copyright © 2013-2015 Aisino. All Rights Reserved.</p>
		</div>
	</div>
	<!-- footer end -->
	
	<script type="text/javascript" src="../../script/jquery.js"></script>
	<script type="text/javascript" src="jquery.lottery.js"></script>
    <script type="text/javascript" src="../layer/jquery.layer.js"></script>
	<script type="text/javascript" src="../../script/syntax/shCore.js"></script>
	<script type="text/javascript" src="../../script/syntax/shBrushCss.js"></script>
	<script type="text/javascript" src="../../script/syntax/shBrushXml.js"></script>
	<script type="text/javascript" src="../../script/syntax/shBrushJScript.js"></script>
	<script type="text/javascript" src="../../script/page.js"></script>
	<script type="text/javascript" src="../data.js"></script>
	<script type="text/javascript" src="../menu.js"></script>
	<script type="text/javascript" src="../arttemplate/template.js"></script>
	<script type="text/javascript" src="./log.js"></script>
	<script type="text/html" id="updatelog-tpl">
	{{each list as val key}}
		<p>Version:{{val.ver}}</p>
		{{if val.date}}
		<p>Date:{{val.date}}</p>	
		{{/if}}
		{{each val.desc as v k}}
		<p>{{v}}</p>
		{{/each}}
		<br />
	{{/each}}
	</script>
	<script type="text/javascript">
	$('.m-demo1').lottery({
		url:function(self){
			return 'http://www.yinjiazeng.com/testdata/test/upload.php?callback=?&type='+self.data('type');
		},
		succCallback:function(data, items){
			var index = 0;
			items.each(function(){
				if($(this).text() == data.result.name){
					index = $(this).index();
					return false;
				}
			});
			return index;
		},
		complete:function(data, items){
			$.layer.alert(items.eq(data.index).text(), '', 280);
		}
	});

    var color = ['5C9DAF', 'DF88CF', '8ED9F9', 'FEF9B9', '21D9CF', 'FFF79A', 'FA598F', '9FF9F7', 'FFD6E8', 'FFB119', 'FDFACF', 'FDDE2E'];
	var colorTimer = null, rand, li = $('.m-demo2 li');
	var eachSetColor = function(){
		color.push(color.shift());
		li.each(function(){
			$(this).css({backgroundColor:'#'+color[$(this).index()]});
		});
	}
	eachSetColor();
	var setRandColor = function(){
		colorTimer = setInterval(eachSetColor, 1000);
	}
	setRandColor();

	var prob = [1, 1, 40, 2, 4, 1, 1, 3, 40, 2, 2, 1], 
		total = (function(){
			var res = 0;
			for(var i in prob){
				res += prob[i];
			}
			return res;
		})();
		
	$('.m-demo2').lottery({
		count:12,
		trans:2,
		getRandom:function(self){
			var beginNum = temp = index = 0,
				rand = Math.round(Math.random()*total) + 1;
			$.each(prob, function(k, v){
				temp += v;
				beginNum = total - temp;
				if(rand > beginNum && rand <= (beginNum + v)){
					index = k;
					return false;
				}
			});
			
			return index;
		},
		complete:function(data, items){
			setRandColor();
			$.layer.alert(items.eq(data.index).attr('title'), '', 280);
		},
		bindClick:function(){
			clearInterval(colorTimer);
		}
	});
	
	var dataArr2 = [
		{name:'5M永久空间', prob:15},
		{name:'80M永久空间', prob:10},
		{name:'1G永久空间', prob:1},
		{name:'200M永久空间', prob:2},
		{name:'100M永久空间', prob:2},
		{name:'20M永久空间', prob:12},
		{name:'再接再厉', prob:50},
		{name:'10G永久空间', prob:1},
		{name:'50M永久空间', prob:8},
		{name:'1T永久空间', prob:0}
	];
	
	$('.m-demo3').lottery({
		count:10,
		getRandom:function(self){
			var beginNum = temp = index = 0,
				rand = Math.round(Math.random()*100) + 1;
				$.each(dataArr2, function(k, v){
					var prob = v.prob;
					temp += prob;
					beginNum = 100 - temp;
					if(rand > beginNum && rand <= (beginNum + prob)){
						index = k;
						return false;
					}
				});
				return index;
			},
			statusCallback:function(target, index){
				target.parent().removeClass().addClass('ui-lottery s-r'+index);
			},
			complete:function(data, items){
				$.layer.alert(dataArr2[data.index].name, '', 280);
			}
		});
	</script>
</body>
</html>